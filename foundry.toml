[profile.default]

# ==============================================================================
# üè¢ PROJECT INFRASTRUCTURE
# ==============================================================================

src            = "src"
out            = "out"
libs           = ["lib"]
test           = "test"
script         = "scripts"
cache_path     = "cache"


# ==============================================================================
# üíé COMPILER STRATEGY ‚Äî Solidity 0.8.33 (Governance-Optimized)
# ==============================================================================

solc_version   = "0.8.33"
via_ir         = true
optimizer      = true
optimizer_runs = 800            # Optimized for governance-heavy runtime usage
bytecode_hash  = "none"         # Deterministic bytecode
cbor_metadata  = false          # Deterministic deployment artifacts
evm_version    = "cancun"       # Latest stable execution target (TSTORE/TLOAD enabled)


# ==============================================================================
# üì¶ COMPILER WARNING MANAGEMENT
# ==============================================================================

# Suppression of Note [1891] is required for clean output.
# Note: ERC-6372 (CLOCK_MODE) naming convention is handled via [fmt] ignore
# to ensure compatibility without triggering configuration errors.

ignored_error_codes = [1891]    # Solc: Unreachable code/specific notes


# ==============================================================================
# üîó ARCHITECTURAL REMAPPINGS
# ==============================================================================

remappings = [
    "@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/",
    "@openzeppelin/contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/contracts/",
    "@interfaces/=src/interfaces/",
    "@libraries/=src/libraries/",
    "@core/=src/core/",
    "@security/=src/security/",
    "forge-std/=lib/forge-std/src/"
]


# ==============================================================================
# üß™ ADVANCED FUZZING CONFIGURATION (Governance & Upgrade Safety)
# ==============================================================================

[fuzz]
runs = 10_000                   # Strengthened invariant surface exploration
max_test_rejects = 131_072      # Increased threshold for complex state machines


# ==============================================================================
# üèõÔ∏è INSTITUTIONAL FORMATTING STANDARD
# ==============================================================================

[fmt]
line_length           = 100
tab_width             = 4
bracket_spacing       = true
check_functions_order = true
multiline_func_header = "attributes_first"
quote_style           = "double"

# ERC-6372 naming standard (CLOCK_MODE) exception:
# This prevents the "mixed-case-function" linter warning for the core contract.
ignore = ["src/core/AOXC.sol"]


# ==============================================================================
# üåê NETWORK CONFIGURATION
# ==============================================================================

[rpc_endpoints]
xlayer_mainnet = "https://rpc.xlayer.okx.com"
xlayer_testnet = "https://testrpc.xlayer.okx.com"


# ==============================================================================
# üîç CONTRACT VERIFICATION ENDPOINTS
# ==============================================================================

[etherscan]
xlayer_mainnet = { key = "${XLAYER_API_KEY}", url = "https://www.oklink.com/api/v5/explorer/xlayer/api" }
xlayer_testnet = { key = "${XLAYER_API_KEY}", url = "https://www.oklink.com/api/v5/explorer/xlayer-test/api" }
