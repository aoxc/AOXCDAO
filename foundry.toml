[profile.default]

# ==============================================================================
# üè¢ SYSTEM TOPOLOGY & MODULE DOCKING
# ==============================================================================
# "src" remains the core forge. Ships are docked as explicit top-level modules 
# to ensure absolute memory safety during compilation.

src           = "src"
out           = "out"
test          = "test"
script        = "scripts"
cache_path    = "cache"

# Explicit Module Injection (Prevents Recursive Stack Overflow)
libs          = [
    "lib", 
    "ANDROMEDA", "VIRGO", "AQUILA", 
    "CENTAURUS", "PEGASUS", "QUASAR", "SOMBRERO"
]

# ==============================================================================
# üíé COMPILER STRATEGY ‚Äî Solidity 0.8.33 (Apex-Grade)
# ==============================================================================

solc_version   = "0.8.33"
via_ir         = true                  # Advanced Intermediate Representation optimization
optimizer      = true
optimizer_runs = 1000                  # Increased for peak operational efficiency
bytecode_hash  = "none"                # Ensures deterministic ship identification
cbor_metadata  = false                # Strips metadata for lean deployment
evm_version    = "cancun"              # Targets TSTORE/TLOAD for gas-efficient state management

# ==============================================================================
# üîó ARCHITECTURAL MAPPING (Fleet Virtualization)
# ==============================================================================

remappings = [
    "@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/",
    "@openzeppelin/contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/contracts/",
    "forge-std/=lib/forge-std/src/",
    "@interfaces/=src/interfaces/",
    "@libraries/=src/libraries/",
    "@core/=src/core/",
    "@security/=src/security/",
    
    # --- üåå FLEET MODULE RE-ENTRY POINTS ---
    "@andromeda/=ANDROMEDA/",
    "@virgo/=VIRGO/",
    "@aquila/=AQUILA/",
    "@centaurus/=CENTAURUS/",
    "@pegasus/=PEGASUS/",
    "@quasar/=QUASAR/",
    "@sombrero/=SOMBRERO/"
]

# ==============================================================================
# üß™ INVARIANT & FUZZING ENGINE
# ==============================================================================

[fuzz]
runs = 10_000                          # Stress-testing ship integrity
max_test_rejects = 131_072

[invariant]
runs = 5_000                           # Ensuring fleet-wide state consistency
depth = 500                            # Deep state-space exploration

# ==============================================================================
# üèõÔ∏è INSTITUTIONAL FORMATTING & LINT GUARD
# ==============================================================================

[fmt]
line_length           = 100
tab_width             = 4
bracket_spacing       = true
check_functions_order = true
multiline_func_header = "attributes_first"
quote_style           = "double"

# Protects your Serial-ID naming standard from being altered
ignore = [
    "src/core/AOXC.sol",
    "**/0000*.sol"                     
]

# ==============================================================================
# üåê PROTOCOL ENDPOINTS (XLayer Native)
# ==============================================================================

[rpc_endpoints]
xlayer_mainnet = "https://rpc.xlayer.okx.com"
xlayer_testnet = "https://testrpc.xlayer.okx.com"

[etherscan]
xlayer_mainnet = { key = "${XLAYER_API_KEY}", url = "https://www.oklink.com/api/v5/explorer/xlayer/api" }
xlayer_testnet = { key = "${XLAYER_API_KEY}", url = "https://www.oklink.com/api/v5/explorer/xlayer-test/api" }
